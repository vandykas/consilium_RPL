<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consilium - Notifikasi</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/styles.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/navigation.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/notifikasi.css}">
</head>
<body>
    <th:block th:replace="~{layout/navigation :: navBar}"></th:block>
    
    <main>
        <header>
            <h1>Notifikasi</h1>
        </header>
        
        <div id="notification-container">
            <!-- Pengajuan Bimbingan -->
            <section aria-labelledby="pengajuan-heading">
                <div class="notification-header-container">
                    <h4 id="pengajuan-heading">Pengajuan Bimbingan</h4>
                </div>
                <div class="notification-body-container">
                    <div class="notification-item" 
                         th:each="notif : ${notifications}"
                         th:if="${notif.status == null}">
                        <div class="notification-item-left">
                            <p>
                                Penjadwalan Bimbingan pada 
                                <span th:text="${#temporals.format(notif.tanggal, 'EEEE, dd MMMM yyyy')}">tanggal</span>
                                di <span th:text="${notif.ruangan}">ruangan</span>
                            </p>
                            <p>
                                Jam: 
                                <span th:text="${notif.waktuMulai}">mulai</span> - 
                                <span th:text="${notif.waktuSelesai}">selesai</span>
                            </p>
                            <p>
                                <span th:text="${currentRole == 'mahasiswa'} ? 'Dosen' : 'Mahasiswa'"></span>: <span th:text="${notif.pengirim}"></span>
                            </p>
                        </div>
                        <div class="notification-item-right">
                            <p>
                                <time th:datetime="${notif.tanggalKirim}">
                                    <span th:text="${#temporals.format(notif.tanggal, 'dd MMMM yyyy')}">tanggal</span>
                                </time>
                            </p>
                            <p><span th:text="${notif.waktuKirim}">waktu</span></p>
                            <button type="button" 
                                    class="accept-button"
                                    th:data-notif-id="${notif.id}">
                                Setuju
                            </button>
                            <button type="button" 
                                    class="deny-button"
                                    th:data-notif-id="${notif.id}">
                                Tolak
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Catatan Bimbingan -->
            <section aria-labelledby="catatan-heading">
                <div class="notification-header-container">
                    <h4 id="catatan-heading">Catatan Bimbingan</h4>
                </div>
                <div class="notification-body-container">
                    <div class="notification-item"
                         th:each="notif : ${notifications}"
                         th:if="${notif.catatanDosen != null and notif.catatanDosen != ''}">
                        <div class="notification-item-left">
                            <p>
                                Catatan mengenai bimbingan pada
                                <span th:text="${#temporals.format(notif.tanggal, 'EEEE, dd MMMM yyyy')}">tanggal</span>
                                di <span th:text="${notif.ruangan}">ruangan</span>
                                sudah dimasukkan
                            </p>
                        </div>
                        <div class="notification-item-right">
                            <p>
                                <time th:datetime="${notif.tanggalKirim}">
                                    <span th:text="${#temporals.format(notif.tanggal, 'dd MMMM yyyy')}">tanggal</span>
                                </time>
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sistem -->
            <section aria-labelledby="sistem-heading">
                <div class="notification-header-container">
                    <h4 id="sistem-heading">Sistem</h4>
                </div>
                <div class="notification-body-container">
                    <div class="notification-item" 
                         th:each="notif : ${notifications}"
                         th:if="${notif.status != null}">
                        <div class="notification-item-left">
                            <p>
                                Penjadwalan Bimbingan pada 
                                <span th:text="${#temporals.format(notif.tanggal, 'EEEE, dd MMMM yyyy')}">tanggal</span>
                                di <span th:text="${notif.ruangan}">ruangan</span>
                            </p>
                            <p>
                                Jam: 
                                <span th:text="${notif.waktuMulai}">mulai</span> - 
                                <span th:text="${notif.waktuSelesai}">selesai</span>
                            </p>
                            <p>
                                <span th:text="${currentRole == 'mahasiswa'} ? 'Dosen' : 'Mahasiswa'"></span>: <span th:text="${notif.pengirim}"></span>
                            </p>
                        </div>
                        <div class="notification-item-right">
                            <p>
                                <time th:datetime="${notif.tanggalKirim}">
                                    <span th:text="${#temporals.format(notif.tanggal, 'dd MMMM yyyy')}">tanggal</span>
                                </time>
                            </p>
                            <p><span th:text="${notif.waktuKirim}">waktu</span></p>
                            <button type="button"
                                    th:if="${notif.status}"
                                    class="accept-button"
                                    disabled>
                                Disetujui
                            </button>
                            <button type="button"
                                    th:if="${notif.status == false}"
                                    class="deny-button"
                                    disabled>
                                Ditolak
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
</body>
</html>