<!DOCTYPE html>
<html lang="id" 
      xmlns:th="http://www.thymeleaf.org"
      th:fragment="jadwal (title, welcomeText)">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:replace="${title}">Jadwal Bimbingan</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/styles.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/navigation.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/calendar.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/jadwal.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/popup.css}"/>
</head>
<body>
    <th:block th:replace="~{layout/navigation :: navBar}"></th:block>
    <main>
        <div id="left-container">
            <header>
                <h1>Jadwal Bimbingan</h1>
                <p th:replace="${welcomeText}"></p>
            </header>
            <div id="button-container">
                <button th:if="${currentRole == 'mahasiswa'}" 
                        type="button"
                        class="button_blue">
                    Edit Jadwal Kuliah
                </button>
                <button type="button" 
                        class="button_black"
                        onclick="openPengajuanPopup()">
                    Ajukan Bimbingan
                </button>
            </div>
        </div>
        
        <div id="right-container">
            <div class="calendar">
                <!-- Header hari -->
                <div class="day-header" th:each="day : ${days}">
                    <span th:text="${day.number}">1</span>
                    <span th:text="${day.name}">Senin</span>
                </div>

                <!-- Grid jam -->
                <div class="time-slot" th:each="slot : ${timeSlots}"></div>

                <!-- Event bimbingan -->
                <div class="event bimbingan"
                     th:each="b : ${bimbinganList}"
                     th:style="'grid-column: ' + ${b.dayColumn} + '; grid-row: ' + ${b.startRow} + ' / ' + ${b.endRow}">
                    <h4 th:text="${b.title}">Bimbingan</h4>
                    <p th:text="${b.ruang}">Ruangan</p>
                </div>

                <!-- Event blokir -->
                <div class="event blocked"
                     th:each="b : ${blockedSlots}"
                     th:style="'grid-column: ' + ${b.dayColumn} + '; grid-row: ' + ${b.startRow} + ' / ' + ${b.endRow}">
                </div>
            </div>
        </div>
    </main>
    <th:block th:replace="~{pop-up/pengajuan_bimbingan :: pop-up-pengajuan}"></th:block>
</body>
</html>